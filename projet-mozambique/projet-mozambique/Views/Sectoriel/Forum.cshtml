@using projet_mozambique.Utilitaires
@using projet_mozambique.Models
@{
    //TODO : TRADUCTION RESSOURCES
    ViewBag.Title = "Forum";

    ListePaginee<FilModel> lesFil = (ViewData[Constantes.CLE_FILSFORUM] as ListePaginee<FilModel>);
    GetForum_Result f = (ViewData[Constantes.CLE_FORUM] as GetForum_Result);

<h1>@f.TITRE</h1>

<div class="forum">
    
    <a href="NouveauFil"><img src="~/Content/images/icones/icon-add-black.png" title="Nouveau" alt="Icône Nouveau fil" class="icone" /></a>
    
    <ul class="nav-pagination">
        @if (lesFil.ShowFirstPage)
        {
            <li>@Html.ActionLink("<<", "Forum", new { page = 0 })</li>
            <li>@Html.ActionLink("<", "Forum", new { page = lesFil.PageIndex - 1 })</li>         
        }
        else if (lesFil.HasPreviousPage)
        {
            <li>@Html.ActionLink("<", "Forum", new { page = lesFil.PageIndex - 1 })</li>
        }
    
        @if (lesFil.ShowLastPage)
        {
            <li>@Html.ActionLink(">", "Forum", new { page = lesFil.PageIndex + 1 })</li>
            <li>@Html.ActionLink(">>", "Forum", new { page = lesFil.TotalPages - 1 })</li>            
        }
        else if (lesFil.HasNextPage)
        {
            <li>@Html.ActionLink(">", "Forum", new { page = lesFil.PageIndex + 1 })</li>
        }
    </ul>

    <table>
        <thead>
            <tr>
                <th class="col-fildiscu">Fil de discussion</th>
                <th class="col-nb">Nb Messages</th>
                <th class="col-nb">Nb Lectures</th>
                <th class="col-derniermsg">Dernier message</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < lesFil.Count; i++)
            {
                <tr>
                    <td class="col-fildiscu"><a href="FilDiscu?id=@lesFil[i].id">@lesFil[i].sujet</a></td>
                    <td>@lesFil[i].nbMessages</td>
                    <td>@lesFil[i].nbLectures</td>
                    <td>Par @lesFil[i].dernierParticipant,<br />
                        @lesFil[i].dateDerniereReponse.ToLongDateString().Replace(DateTime.Now.DayOfWeek.ToString() + ", ", "")
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <div class="nav-bas">
        <ul class="nav-pagination">
            @if (lesFil.ShowFirstPage)
            {
                <li>@Html.ActionLink("<<", "Forum", new { page = 0 })</li>
                <li>@Html.ActionLink("<", "Forum", new { page = lesFil.PageIndex - 1 })</li>         
            }
            else if (lesFil.HasPreviousPage)
            {
                <li>@Html.ActionLink("<", "Forum", new { page = lesFil.PageIndex - 1 })</li>
            }
    
            @if (lesFil.ShowLastPage)
            {
                <li>@Html.ActionLink(">", "Forum", new { page = lesFil.PageIndex + 1 })</li>
                <li>@Html.ActionLink(">>", "Forum", new { page = lesFil.TotalPages - 1 })</li>            
            }
            else if (lesFil.HasNextPage)
            {
                <li>@Html.ActionLink(">", "Forum", new { page = lesFil.PageIndex + 1 })</li>
            }
        </ul>

    </div>
</div>
    
}